from view import *
from PyQt5.QtWidgets import *


QtWidgets.QApplication.setAttribute(QtCore.Qt.AA_EnableHighDpiScaling, True)
QtWidgets.QApplication.setAttribute(QtCore.Qt.AA_UseHighDpiPixmaps, True)


class Controller(QMainWindow, Ui_label_output):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.setupUi(self)

        self.pushButton.clicked.connect(lambda: self.submit())
        self.pushButton_2.clicked.connect(lambda: self.clear())

    def submit(self):
        food = 0
        drink = 0
        dessert = 0
        tip = 0

        try:
            food = float(self.lineEdit_2.text())
            fvalue = True
        except ValueError:
            self.clear()
            self.label.setText("Food, drink, and dessert\nneed to be numeric\ne.g. 10.25 not $10.25")
            fvalue = False

        try:
            drink = float(self.lineEdit_3.text())
            drvalue = True
        except ValueError:
            self.clear()
            self.label.setText("Food, drink, and dessert\nneed to be numeric\ne.g. 10.25 not $10.25")
            drvalue = False

        try:
            dessert = float(self.lineEdit_4.text())
            dvalue = True
        except ValueError:
            self.clear()
            self.label.setText("Food, drink, and dessert\nneed to be numeric\ne.g. 10.25 not $10.25")
            dvalue = False

        if self.radio_10.isChecked():
            tip = 0.10
        elif self.radio_15.isChecked():
            tip = 0.15
        elif self.radio_20.isChecked():
            tip = 0.20

        if food and drink and dessert:
            subtotal = food + drink + dessert
            tax = subtotal * 0.10
            subtotal2 = subtotal + tax
            tip_total = tip * subtotal2
            cost_total = subtotal2 + tip_total

            self.label_summary.setText("SUMMARY")
            self.label.setText(f'Food:\t\t${food:.2f}\nDrink:\t\t${drink:.2f}\nDessert:\t\t${dessert:.2f}\nTax:\t\t${tax:.2f}\nTip:\t\t${tip_total:.2f}\n\nTOTAL:\t\t${cost_total:.2f}')

    def clear(self):
        self.lineEdit_2.setText("")
        self.lineEdit_3.setText("")
        self.lineEdit_4.setText("")
        self.label.setText("")
        self.label_summary.setText("")
        self.radio_10.setChecked(True)
